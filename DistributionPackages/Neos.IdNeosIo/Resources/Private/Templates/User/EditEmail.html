<f:layout name="Default" />

<f:section name="Title">Update your Neos Community Profile</f:section>

<f:section name="Content">

	<div class="row">
		<aside class="col-md-4 col-md-offset-1">
			<p>Edit your user Neos Community Profile email address.</p>
			<p><strong>Note:</strong> After you submit the form we will send you an email that allows you to verify the new address within 24 hours. Your Neos Community Profile won't be updated before you click the confirmation link.</p>
			<p>&nbsp;</p>
			<p><f:link.action action="index">Cancel</f:link.action></p>

		</aside>
		<article class="col-md-6">
			<f:render partial="FlashMessages" />

			<f:form action="sendConfirmEmail" objectName="changeEmail" class="form-box form-horizontal">

				<div class="form-group">
					<div class="col-md-7 col-md-offset-4">
						<div class="form-control-static">Please fill in the following field to update your Neos Community Profile email address:</div>
					</div>
				</div>

				<hr />

				<f:validation.results>
					<f:if condition="{validationResults.flattenedErrors}">
						<div class="col-md-7 col-md-offset-4">
							<p class="text-danger">
								<strong>There are some errors in the form.</strong>
							</p>
						</div>
					</f:if>
				</f:validation.results>

				<f:validation.results for="changeEmail.email">
					<div class="form-group{f:if(condition: validationResults.flattenedErrors, then: ' has-error has-feedback')}">
						<label class="col-md-3 col-md-offset-1 control-label">Email address</label>
						<div class="col-md-7">
							<f:form.textfield required="required" id="email" type="email" property="email" value="{crowdUser.email}" class="form-control" placeholder="Email address"/>
							<f:if condition="{validationResults.flattenedErrors}">
								<span class="glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>
								<span class="help-block">
									<f:for each="{validationResults.errors}" as="error">
										{error}
									</f:for>
								</span>
							</f:if>
						</div>
					</div>
				</f:validation.results>

				<hr />

				<div class="form-group">
					<div class="col-md-7 col-md-offset-4">
						<f:form.button type="submit" class="btn btn-primary btn-block">Update Email address</f:form.button>
					</div>
				</div>
			</f:form>

		</article>
	</div>

</f:section>
